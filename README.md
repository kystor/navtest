# Nav-item - ä¸ªäººå¯¼èˆªç«™
æ•™ç¨‹:https://www.youtube.com/watch?v=AEXj3VR2LMY
## é¡¹ç›®ç®€ä»‹

ä¸€ä¸ªç°ä»£åŒ–çš„å¯¼èˆªç½‘ç«™é¡¹ç›®ï¼Œæä¾›ç®€æ´ç¾è§‚çš„å¯¼èˆªç•Œé¢å’Œå¼ºå¤§çš„åå°ç®¡ç†ç³»ç»Ÿ,å¿«é€Ÿè®¿é—®å¸¸ç”¨ç½‘ç«™å’Œå·¥å…·ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ
- Vue 3 + Node.js + SQLite å‰åç«¯åˆ†ç¦»æ¶æ„

## âœ¨ ä¸»è¦åŠŸèƒ½

### å‰ç«¯åŠŸèƒ½
- ğŸ  **é¦–é¡µå¯¼èˆª**ï¼šç¾è§‚çš„å¡ç‰‡å¼å¯¼èˆªç•Œé¢
- ğŸ” **èšåˆæœç´¢**ï¼šæ”¯æŒ Googleã€ç™¾åº¦ã€Bingã€GitHubã€ç«™å†…æœç´¢
- ğŸ“± **å“åº”å¼è®¾è®¡**ï¼šå®Œç¾é€‚é…æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯
- ğŸ¨ **ç°ä»£åŒ–UI**ï¼šé‡‡ç”¨æ¸å˜èƒŒæ™¯å’Œæ¯›ç»ç’ƒæ•ˆæœ
- ğŸ”— **å‹æƒ…é“¾æ¥**ï¼šæ”¯æŒå‹æƒ…é“¾æ¥å±•ç¤º
- ğŸ“¢ **å¹¿å‘Šä½**ï¼šæ”¯æŒå·¦å³ä¸¤ä¾§å¹¿å‘Šä½å±•ç¤º

### åå°ç®¡ç†åŠŸèƒ½
- ğŸ‘¤ **ç”¨æˆ·ç®¡ç†**ï¼šç®¡ç†å‘˜ç™»å½•ã€ç”¨æˆ·ä¿¡æ¯ç®¡ç†
- ğŸ“‹ **æ ç›®ç®¡ç†**ï¼šä¸»èœå•å’Œå­èœå•çš„å¢åˆ æ”¹æŸ¥
- ğŸƒ **å¡ç‰‡ç®¡ç†**ï¼šå¯¼èˆªå¡ç‰‡çš„å¢åˆ æ”¹æŸ¥
- ğŸ“¢ **å¹¿å‘Šç®¡ç†**ï¼šå¹¿å‘Šä½çš„å¢åˆ æ”¹æŸ¥
- ğŸ”— **å‹é“¾ç®¡ç†**ï¼šå‹æƒ…é“¾æ¥çš„å¢åˆ æ”¹æŸ¥
- ğŸ“Š **æ•°æ®ç»Ÿè®¡**ï¼šç™»å½•æ—¶é—´ã€IPç­‰ç»Ÿè®¡ä¿¡æ¯

### æŠ€æœ¯ç‰¹æ€§
- ğŸ” **JWTè®¤è¯**ï¼šå®‰å…¨çš„ç”¨æˆ·è®¤è¯æœºåˆ¶
- ğŸ—„ï¸ **SQLiteæ•°æ®åº“**ï¼šè½»é‡çº§æ•°æ®åº“ï¼Œæ— éœ€é¢å¤–é…ç½®
- ğŸ“¤ **æ–‡ä»¶ä¸Šä¼ **ï¼šæ”¯æŒå›¾ç‰‡ä¸Šä¼ åŠŸèƒ½
- ğŸ” **æœç´¢åŠŸèƒ½**ï¼šæ”¯æŒç«™å†…æœç´¢å’Œå¤–éƒ¨æœç´¢
- ğŸ“± **ç§»åŠ¨ç«¯é€‚é…**ï¼šå®Œç¾çš„ç§»åŠ¨ç«¯ä½“éªŒ

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
nav-item/
â”œâ”€â”€ app.js                 # åç«¯ä¸»å…¥å£æ–‡ä»¶
â”œâ”€â”€ config.js             # é…ç½®æ–‡ä»¶
â”œâ”€â”€ db.js                 # æ•°æ®åº“åˆå§‹åŒ–
â”œâ”€â”€ package.json          # åç«¯ä¾èµ–é…ç½®
â”œâ”€â”€ database/             # æ•°æ®åº“æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ nav.db           # SQLiteæ•°æ®åº“æ–‡ä»¶
â”œâ”€â”€ routes/               # åç«¯è·¯ç”±
â”‚   â”œâ”€â”€ auth.js          # è®¤è¯ç›¸å…³è·¯ç”±
â”‚   â”œâ”€â”€ menu.js          # èœå•ç®¡ç†è·¯ç”±
â”‚   â”œâ”€â”€ card.js          # å¡ç‰‡ç®¡ç†è·¯ç”±
â”‚   â”œâ”€â”€ ad.js            # å¹¿å‘Šç®¡ç†è·¯ç”±
â”‚   â”œâ”€â”€ friend.js        # å‹é“¾ç®¡ç†è·¯ç”±
â”‚   â”œâ”€â”€ user.js          # ç”¨æˆ·ç®¡ç†è·¯ç”±
â”‚   â””â”€â”€ upload.js        # æ–‡ä»¶ä¸Šä¼ è·¯ç”±
â”œâ”€â”€ uploads/              # ä¸Šä¼ æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ default-favicon.png
â”œâ”€â”€ web/                  # å‰ç«¯é¡¹ç›®ç›®å½•
â”‚    â”œâ”€â”€ package.json      # å‰ç«¯ä¾èµ–é…ç½®
â”‚    â”œâ”€â”€ vite.config.mjs   # Viteé…ç½®æ–‡ä»¶
â”‚    â”œâ”€â”€ index.html        # HTMLå…¥å£æ–‡ä»¶
â”‚    â”œâ”€â”€ public/           # é™æ€èµ„æº
â”‚    â”‚   â”œâ”€â”€ background.webp
â”‚    â”‚   â”œâ”€â”€ default-favicon.png
â”‚    â”‚   â””â”€â”€ robots.txt
â”‚    â””â”€â”€ src/              # å‰ç«¯æºç 
â”‚        â”œâ”€â”€ main.js       # Vueåº”ç”¨å…¥å£
â”‚        â”œâ”€â”€ router.js     # è·¯ç”±é…ç½®
â”‚        â”œâ”€â”€ api.js        # APIæ¥å£å°è£…
â”‚        â”œâ”€â”€ App.vue       # æ ¹ç»„ä»¶
â”‚        â”œâ”€â”€ components/   # å…¬å…±ç»„ä»¶
â”‚        â”‚   â”œâ”€â”€ MenuBar.vue
â”‚        â”‚   â””â”€â”€ CardGrid.vue
â”‚        â””â”€â”€ views/        # é¡µé¢ç»„ä»¶
â”‚            â”œâ”€â”€ Home.vue  # é¦–é¡µ
â”‚            â”œâ”€â”€ Admin.vue # åå°ç®¡ç†
â”‚            â””â”€â”€ admin/    # åå°ç®¡ç†å­é¡µé¢
â”‚                â”œâ”€â”€ MenuManage.vue
â”‚                â”œâ”€â”€ CardManage.vue
â”‚               â”œâ”€â”€ AdManage.vue
â”‚               â”œâ”€â”€ FriendLinkManage.vue
â”‚               â””â”€â”€ UserManage.vue
â”œâ”€â”€ Dockerfile # Dockeræ„å»ºæ–‡ä»¶
```

## âš™ï¸ ç¯å¢ƒå˜é‡åŠé…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡
- `PORT`: æœåŠ¡å™¨ç«¯å£å·ï¼ˆé»˜è®¤: 3000ï¼‰
- `ADMIN_USERNAME`: ç®¡ç†å‘˜ç”¨æˆ·åï¼ˆé»˜è®¤: adminï¼‰
- `ADMIN_PASSWORD`: ç®¡ç†å‘˜å¯†ç ï¼ˆé»˜è®¤: 123456ï¼‰
- | å˜é‡å | ç¤ºä¾‹å€¼ | æè¿° |
| :--- | :--- | :--- |
| `BACKUP_REPO_URL` | `https://github.com/username/my-repo.git` | å®Œæ•´çš„ä»“åº“å…‹éš†åœ°å€ã€‚ |
| `GITHUB_TOKEN` | `ghp_xxxxxxxxxxxx` | **å¿…é¡»**ã€‚GitHub ä¸ªäººè®¿é—®ä»¤ç‰Œã€‚ |

**æ–¹æ¡ˆ Bï¼šæ‹†åˆ†é…ç½®**

| å˜é‡å | ç¤ºä¾‹å€¼ | æè¿° |
| :--- | :--- | :--- |
| `GITHUB_USER` | `kystor` | GitHub ç”¨æˆ·åã€‚ |
| `GITHUB_REPO` | `nav-backup` | ä»“åº“åç§°ã€‚ |
| `GITHUB_TOKEN` | `ghp_xxxxxxxxxxxx` | **å¿…é¡»**ã€‚GitHub ä¸ªäººè®¿é—®ä»¤ç‰Œã€‚ |

### ğŸŸ¢ é€‰å¡«é¡¹ (æ‹¥æœ‰é»˜è®¤å€¼)

| å˜é‡å | é»˜è®¤å€¼ | æè¿° |
| :--- | :--- | :--- |
| `DB_PATH` | `/app/database/nav.db` | éœ€è¦ç›‘æ§çš„æºæ–‡ä»¶**ç»å¯¹è·¯å¾„**ã€‚ |
| `BACKUP_INTERVAL` | `10` | è½®è¯¢æ£€æŸ¥é¢‘ç‡ (ç§’)ã€‚ |
| `GITHUB_EMAIL` | `bot@nav.backup` | Git æäº¤è®°å½•ä¸­çš„é‚®ç®±ã€‚ |
| `GITHUB_NAME` | `NavBackupBot` | Git æäº¤è®°å½•ä¸­çš„ç”¨æˆ·åã€‚ |
| `SITE_TITLE` | `æˆ‘çš„å¯¼èˆª` | ç½‘é¡µåç§°ã€‚ |

### æ•°æ®åº“é…ç½®
ç³»ç»Ÿä½¿ç”¨ SQLite æ•°æ®åº“ï¼Œæ•°æ®åº“æ–‡ä»¶ä¼šè‡ªåŠ¨åˆ›å»ºåœ¨é¡¹ç›®/database/ç›®å½•ä¸‹ï¼Œä½¿ç”¨dockeréƒ¨ç½²è¯·æŒ‚è½½/app/databaseç›®å½•å®ç°æ•°æ®æŒä¹…åŒ–
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### æºä»£ç éƒ¨ç½²

#### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/eooce/nav-Item.git
cd nav-item
```

#### 2. å®‰è£…åç«¯ä¾èµ–
```bash
npm install
```

#### 3. æ„å»ºå‰ç«¯
```bash
cd web && npm install && npm run build
```

#### 4. å¯åŠ¨åç«¯æœåŠ¡
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
cd .. && npm start
```

#### 6. è®¿é—®åº”ç”¨
- å‰ç«¯åœ°å€ï¼šhttp://localhost:3000
- åå°ç®¡ç†ï¼šhttp://localhost:3000/admin
- é»˜è®¤ç®¡ç†å‘˜è´¦å·ï¼šadmin / 123456

### Docker éƒ¨ç½²

#### 1ï¼šdockerå¿«é€Ÿéƒ¨ç½²
   ```bash
   docker run -d \
     --name nav-item \
     -p 3000:3000 \
     -v $(pwd)/database:/app/database \
     -v $(pwd)/uploads:/app/uploads \
     -e NODE_ENV=production \
     -e ADMIN_USERNAME=admin \
     -e ADMIN_PASSWORD=123456 \
     eooce/nav-item
   ```
### 2: docker-compose.yaml éƒ¨ç½²
```bash
version: '3'

services:
  nav-item:
    image: eooce/nav-item
    container_name: nav-item
    ports:
      - "3000:3000"
    environment:
      - PORT=3000             # ç›‘å¬ç«¯å£
      - ADMIN_USERNAME=admin  # åå°ç”¨æˆ·å
      - ADMIN_PASSWORD=123456 # åå°å¯†ç 
    volumes:
      - ./database:/app/database  # æŒä¹…åŒ–æ•°æ®åº“
    restart: unless-stopped
```
### 3: dockerå®¹å™¨ç­‰ä½¿ç”¨docker imageé…åˆç¯å¢ƒå˜é‡éƒ¨ç½²
```bash
eooce/nav-item
```
æˆ–
```bash
ghcr.io/eooce/nav-item:latest
```

## serv00|ct8|Hostuno ä¸€é”®å®‰è£…è„šæœ¬
- ç¯å¢ƒå˜é‡,æ”¾åœ¨è„šæœ¬å‰ï¼Œéšè„šæœ¬ä¸€èµ·è¿è¡Œï¼Œè‹±æ–‡ç©ºéš”éš”å¼€
- åå°ç®¡ç†ç”¨æˆ·åå’Œå¯†ç é»˜è®¤åˆ†åˆ«ä¸ºä¸º`admin`å’Œ`123456`
  * `DOMAIN`ä¸ºè‡ªå®šä¹‰ç«™ç‚¹åŸŸå

```bash
bash <(curl -Ls https://github.com/eooce/nav-item/releases/download/ct8-and-serv00/install.sh) 
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ‘¨â€ğŸ’» ä½œè€…

**eooce** - [GitHub](https://github.com/eooce)

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ªæ˜Ÿæ ‡ï¼ 

# ğŸ“‚ è‡ªåŠ¨ Git åŒå‘åŒæ­¥ & å¤‡ä»½è„šæœ¬ (Sidecar æ¨¡å¼)

è¿™æ˜¯ä¸€ä¸ªä¸“ä¸º **å®¹å™¨åŒ–ç¯å¢ƒ** è®¾è®¡çš„è½»é‡çº§ Shell è„šæœ¬ã€‚å®ƒä¸ä»…èƒ½å°†æœ¬åœ°æ–‡ä»¶çš„å˜åŒ–æ¨é€åˆ° GitHubï¼Œè¿˜èƒ½**è‡ªåŠ¨æ‹‰å–äº‘ç«¯çš„æ›´æ–°**è¦†ç›–æœ¬åœ°ã€‚

ç‰¹åˆ«é’ˆå¯¹ **SQLite æ•°æ®åº“** è¿›è¡Œäº†ä¼˜åŒ–ï¼Œè§£å†³äº† Docker æŒ‚è½½å·ä¸­å¸¸è§çš„ `Read-only database` æƒé™é—®é¢˜ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

* **âš¡ï¸ åŒå‘åŒæ­¥**ï¼š
    * **ä¸Šè¡Œ**ï¼šç›‘æ§æœ¬åœ°æ–‡ä»¶å˜åŒ– -> è‡ªåŠ¨ Push åˆ°ä»“åº“ã€‚
    * **ä¸‹è¡Œ**ï¼šå¯åŠ¨æˆ–è½®è¯¢æ—¶æ£€æŸ¥è¿œç¨‹ä»“åº“ -> è‡ªåŠ¨ Pull å¹¶è¦†ç›–æœ¬åœ°ï¼ˆé€‚åˆå¤šåœ°éƒ¨ç½²åœºæ™¯ï¼‰ã€‚
* **ğŸ›¡ï¸ SQLite ä¸“å±ä¿æŠ¤**ï¼š
    * **æƒé™ä¿®å¤**ï¼šæ¯æ¬¡æ“ä½œå‰åè‡ªåŠ¨æ‰§è¡Œ `chmod`ï¼Œç¡®ä¿æ•°æ®åº“æ–‡ä»¶å’Œç›®å½•å§‹ç»ˆå¯è¯»å†™ã€‚
    * **Inode ä¿æŠ¤**ï¼šä½¿ç”¨ `cat > file` å†™å…¥æ•°æ®ï¼Œè€Œéç›´æ¥ `cp` æ›¿æ¢ï¼Œå®Œç¾ä¿ç•™åŸæ–‡ä»¶å±æ€§ï¼Œé˜²æ­¢æ•°æ®åº“é”æ­»ã€‚
* **â³ é˜²æŠ–åŠ¨æœºåˆ¶**ï¼šå†…ç½®ç­‰å¾…æœºåˆ¶ï¼Œç¡®ä¿æ–‡ä»¶å†™å…¥å®Œå…¨ç»“æŸåå†è§¦å‘åŒæ­¥ã€‚
* **ğŸ³ å®¹å™¨å‹å¥½**ï¼šæ”¯æŒ `BACKUP_REPO_URL` å®Œæ•´é“¾æ¥é…ç½®ï¼Œé…ç½®æ›´ç®€å•ã€‚

---

## ğŸ› ï¸ å‰ç½®å‡†å¤‡

1.  **GitHub è´¦å·**ã€‚
2.  **ç§æœ‰ä»“åº“**ï¼ˆå»ºè®®ç§æœ‰ï¼Œä¿æŠ¤æ•°æ®å®‰å…¨ï¼‰ã€‚
3.  **Personal Access Token (PAT)**ï¼š
    * åœ¨ GitHub Settings -> Developer settings -> Personal access tokens ç”Ÿæˆã€‚
    * æƒé™è¦æ±‚ï¼šå‹¾é€‰ `repo` (Full control of private repositories)ã€‚

---

## âš™ï¸ é…ç½®è¯´æ˜ (ç¯å¢ƒå˜é‡)

ä½ å¯ä»¥åœ¨ `docker-compose.yaml` ä¸­è®¾ç½®ä»¥ä¸‹å˜é‡ï¼š

### ğŸ”´ å¿…å¡«é¡¹ (äºŒé€‰ä¸€)

ä½ å¯ä»¥é€‰æ‹© **æ–¹æ¡ˆ A (æ¨è)** æˆ– **æ–¹æ¡ˆ B** æ¥é…ç½®ä»“åº“ä¿¡æ¯ã€‚

**æ–¹æ¡ˆ Aï¼šç›´æ¥ä½¿ç”¨å®Œæ•´ URL**

| å˜é‡å | ç¤ºä¾‹å€¼ | æè¿° |
| :--- | :--- | :--- |
| `BACKUP_REPO_URL` | `https://github.com/username/my-repo.git` | å®Œæ•´çš„ä»“åº“å…‹éš†åœ°å€ã€‚ |
| `GITHUB_TOKEN` | `ghp_xxxxxxxxxxxx` | **å¿…é¡»**ã€‚GitHub ä¸ªäººè®¿é—®ä»¤ç‰Œã€‚ |

**æ–¹æ¡ˆ Bï¼šæ‹†åˆ†é…ç½®**

| å˜é‡å | ç¤ºä¾‹å€¼ | æè¿° |
| :--- | :--- | :--- |
| `GITHUB_USER` | `kystor` | GitHub ç”¨æˆ·åã€‚ |
| `GITHUB_REPO` | `nav-backup` | ä»“åº“åç§°ã€‚ |
| `GITHUB_TOKEN` | `ghp_xxxxxxxxxxxx` | **å¿…é¡»**ã€‚GitHub ä¸ªäººè®¿é—®ä»¤ç‰Œã€‚ |

### ğŸŸ¢ é€‰å¡«é¡¹ (æ‹¥æœ‰é»˜è®¤å€¼)

| å˜é‡å | é»˜è®¤å€¼ | æè¿° |
| :--- | :--- | :--- |
| `DB_PATH` | `/app/database/nav.db` | éœ€è¦ç›‘æ§çš„æºæ–‡ä»¶**ç»å¯¹è·¯å¾„**ã€‚ |
| `BACKUP_INTERVAL` | `10` | è½®è¯¢æ£€æŸ¥é¢‘ç‡ (ç§’)ã€‚ |
| `GITHUB_EMAIL` | `bot@nav.backup` | Git æäº¤è®°å½•ä¸­çš„é‚®ç®±ã€‚ |
| `GITHUB_NAME` | `NavBackupBot` | Git æäº¤è®°å½•ä¸­çš„ç”¨æˆ·åã€‚ |

---

## ğŸš€ ä½¿ç”¨æ–¹å¼

### æ¨èï¼šDocker Compose (Sidecar æ¨¡å¼)

å°†æ­¤è„šæœ¬ä½œä¸ºâ€œSidecarï¼ˆè¾¹è½¦ï¼‰â€å®¹å™¨è¿è¡Œï¼Œä¸ä¸»åº”ç”¨å…±äº«æ•°æ®å·ã€‚

```yaml
version: '3'
services:
  # 1. ä¸»åº”ç”¨ (ä¾‹å¦‚ Nav å¯¼èˆªé¡µ)
  nav-app:
    image: eooce/nav-item
    container_name: nav-app
    restart: always
    volumes:
      - ./data:/app/database # æ˜ å°„æœ¬åœ°ç›®å½•åˆ°å®¹å™¨

  # 2. å¤‡ä»½ä¸åŒæ­¥æœåŠ¡
  backup-service:
    image: alpine/git:latest  # ä½¿ç”¨åŒ…å« git çš„è½»é‡çº§é•œåƒ
    container_name: nav-sync
    restart: always
    volumes:
      - ./data:/app/database   # å…³é”®ï¼šå¿…é¡»æŒ‚è½½ä¸ä¸»åº”ç”¨ç›¸åŒçš„ç›®å½•
      - ./backup.sh:/app/backup.sh # æŒ‚è½½è„šæœ¬æ–‡ä»¶
    entrypoint: ["/bin/sh", "/app/backup.sh"] # è¦†ç›–å¯åŠ¨å‘½ä»¤æ‰§è¡Œè„šæœ¬
    environment:
      - GITHUB_TOKEN=ghp_ä½ çš„Tokenå†™åœ¨è¿™é‡Œ
      - BACKUP_REPO_URL=[https://github.com/yourname/your-repo.git](https://github.com/yourname/your-repo.git)
      - DB_PATH=/app/database/nav.db
      - GITHUB_EMAIL=my@email.com

